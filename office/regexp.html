<!DOCTYPE HTML><html lang="zh-hans"><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8" http-equiv="Content-Type"><title>RegExp · 学习笔记</title><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="description" content=""><meta name="generator" content="GitBook 3.2.3"><meta name="author" content="王顶"><link rel="stylesheet" href="../gitbook/style.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-forkmegithub-cn/plugin.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-search-plus/search.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-anchor-navigation-ex/style/plugin.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-image-captions-extended/image-captions.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-bsz/bsz.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-gtalk/gtalk.css"><link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css"><link rel="stylesheet" href="../styles/website.css"><meta name="HandheldFriendly" content="true"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png"><link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon"><link rel="next" href="tern_for_vim.html"><link rel="prev" href="note-gitbook.html"></head><body><div class="book"><div class="book-summary"><div id="book-search-input" role="search"><input type="text" placeholder="输入并搜索"></div><nav role="navigation"><ul class="summary"><li class="chapter" data-level="1.1" data-path="../"><a href="../">简介</a></li><li class="chapter" data-level="1.2" data-path="../fe-roadmap.html"><a href="../fe-roadmap.html">前端开发学习路线图</a></li><li class="header">Office</li><li class="chapter" data-level="2.1" data-path="vim.html"><a href="vim.html">vim</a></li><li class="chapter" data-level="2.2" data-path="cvim.html"><a href="cvim.html">cVim</a></li><li class="chapter" data-level="2.3" data-path="git.html"><a href="git.html">Git</a></li><li class="chapter" data-level="2.4" data-path="note-gitbook.html"><a href="note-gitbook.html">GitBook</a></li><li class="chapter active" data-level="2.5" data-path="regexp.html"><a href="regexp.html">RegExp</a></li><li class="chapter" data-level="2.6" data-path="tern_for_vim.html"><a href="tern_for_vim.html">tern_for_vim</a></li><li class="chapter" data-level="2.7" data-path="redmine.html"><a href="redmine.html">Redmine</a></li><li class="chapter" data-level="2.8" data-path="vmware.html"><a href="vmware.html">vmware</a></li><li class="chapter" data-level="2.9" data-path="win10.html"><a href="win10.html">Win 10</a></li><li class="chapter" data-level="2.10" data-path="latex.html"><a href="latex.html">LaTex</a></li><li class="header">WEB</li><li class="chapter" data-level="3.1" data-path="../web/npm.html"><a href="../web/npm.html">NPM</a></li><li class="chapter" data-level="3.2" data-path="../web/benchmark.html"><a href="../web/benchmark.html">BenchMark</a></li><li class="chapter" data-level="3.3" data-path="../web/css.html"><a href="../web/css.html">CSS</a></li><li class="chapter" data-level="3.4" data-path="../web/javascript.html"><a href="../web/javascript.html">JavaScript</a></li><li class="chapter" data-level="3.5" data-path="../web/data-structure.html"><a href="../web/data-structure.html">数据结构</a></li><li class="chapter" data-level="3.6" data-path="../web/nodejs.html"><a href="../web/nodejs.html">Node.js</a></li><li class="chapter" data-level="3.7" data-path="../web/web.html"><a href="../web/web.html">WEB</a></li><li class="header">Linux</li><li class="chapter" data-level="4.1" data-path="../linux/centos.html"><a href="../linux/centos.html">CentOS</a></li><li class="chapter" data-level="4.2" data-path="../linux/bash.html"><a href="../linux/bash.html">Shell 脚本编程</a></li><li class="chapter" data-level="4.3" data-path="../linux/docker.html"><a href="../linux/docker.html">docker</a></li><li class="chapter" data-level="4.4" data-path="../linux/aliyun.html"><a href="../linux/aliyun.html">aliyun</a></li><li class="chapter" data-level="4.5" data-path="../linux/nginx.html"><a href="../linux/nginx.html">nginx</a></li><li class="chapter" data-level="4.6" data-path="../linux/gitlab.html"><a href="../linux/gitlab.html">GitLab</a></li><li class="chapter" data-level="4.7" data-path="../linux/ruby.html"><a href="../linux/ruby.html">Ruby</a></li><li class="chapter" data-level="4.8" data-path="../linux/alpine.html"><a href="../linux/alpine.html">alpine</a></li><li class="header">Testing</li><li class="chapter" data-level="5.1" data-path="../testing/jmeter.html"><a href="../testing/jmeter.html">JMeter</a></li><li class="chapter" data-level="5.2" data-path="../testing/selenium-ide.html"><a href="../testing/selenium-ide.html">SeleniumIDE</a></li><li class="chapter" data-level="5.3" data-path="../testing/webdriver.html"><a href="../testing/webdriver.html">WebDriver</a></li><li class="header">DataBase</li><li class="chapter" data-level="6.1" data-path="../database/mariadb.html"><a href="../database/mariadb.html">MariaDB</a></li><li class="chapter" data-level="6.2" data-path="../database/mongodb.html"><a href="../database/mongodb.html">MongoDB</a></li><li class="header">杂项</li><li class="chapter" data-level="7.1" data-path="../other.html"><a href="../other.html">杂物间</a></li><li class="divider"></li><li><a href="https://www.gitbook.com" target="blank" class="gitbook-link">本书使用 GitBook 发布</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header" role="navigation"><!-- Title --><h1><i class="fa fa-circle-o-notch fa-spin"></i> <a href="..">RegExp</a></h1></div><div class="page-wrapper" tabindex="-1" role="main"><div class="page-inner"><div class="search-plus" id="book-search-results"><div class="search-noresults"><section class="normal markdown-section"><div id="anchor-navigation-ex-navbar"><i class="fa fa-navicon"></i><ul><li><span class="title-icon"></span><a href="#正则表达式"><b> </b>正则表达式</a></li><ul><li><span class="title-icon"></span><a href="#javascript-中的正则表达式"><b>1. </b>JavaScript 中的正则表达式</a></li><ul><li><span class="title-icon"></span><a href="#正则表达式解释"><b>1.1. </b>正则表达式解释</a></li><li><span class="title-icon"></span><a href="#术语与操作符"><b>1.2. </b>术语与操作符</a></li><li><span class="title-icon"></span><a href="#编译正则表达式"><b>1.3. </b>编译正则表达式</a></li><li><span class="title-icon"></span><a href="#捕获匹配的片段"><b>1.4. </b>捕获匹配的片段</a></li><li><span class="title-icon"></span><a href="#利用函数进行替换"><b>1.5. </b>利用函数进行替换</a></li></ul><li><span class="title-icon"></span><a href="#linux-中的正则表达式"><b>2. </b>Linux 中的正则表达式</a></li><ul><li><span class="title-icon"></span><a href="#grep-命令实现文本搜索"><b>2.1. </b>grep 命令实现文本搜索</a></li><li><span class="title-icon"></span><a href="#less-命令中用正则表达式搜索"><b>2.2. </b>less 命令中用正则表达式搜索</a></li><li><span class="title-icon"></span><a href="#vim-中的正则表达式"><b>2.3. </b>vim 中的正则表达式</a></li></ul><li><span class="title-icon"></span><a href="#相关资源"><b>3. </b>相关资源</a></li></ul></ul></div><a href="#正则表达式" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="正则表达式"><a name="正则表达式" class="anchor-navigation-ex-anchor" href="#正则表达式"><i class="fa fa-link" aria-hidden="true"></i></a> 正则表达式</h1><p>为什么正则表达式很牛？因为正则表达式可以节省代码。</p><h2 id="javascript-中的正则表达式"><a name="javascript-中的正则表达式" class="anchor-navigation-ex-anchor" href="#javascript-中的正则表达式"><i class="fa fa-link" aria-hidden="true"></i></a>1. JavaScript 中的正则表达式</h2><p>参考资料：《JavaScript 忍者秘籍》第 7 章 正则表达式。下面是学习笔记。</p><p>JavaScript 中与正则表达式相关的函数：</p><ul><li>正则对象的属性和方法<ul><li><code>reg.ignoreCase</code></li><li><code>reg.global</code></li><li><code>reg.multiline</code></li><li><code>reg.test()</code></li><li><code>reg.exec()</code></li></ul></li><li>字符串对象的方法<ul><li><code>str.match()</code></li><li><code>str.search()</code></li><li><code>str.replace()</code></li><li><code>str.split()</code></li></ul></li></ul><h3 id="正则表达式解释"><a name="正则表达式解释" class="anchor-navigation-ex-anchor" href="#正则表达式解释"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. 正则表达式解释</h3><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">test</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>                   <span class="token comment">// 正则表达式字面量</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 动态构建正则表达式</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&apos;test&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;ig&apos;</span><span class="token punctuation">)</span>  <span class="token comment">// 第二个参数，正则表达式标志</span>
</code></pre><p>一个动态构建正则表达式的代码片段，这段代码用来检查文本中的淫秽词语：</p><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> badWords <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&apos;ape&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;monkey&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;simian&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;gorilla&apos;</span><span class="token punctuation">,</span> <span class="token string">&apos;evolution&apos;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>badWords<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;|&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&apos;i&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">isAcceptable</span><span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span>pattern<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>三个表达式标志：</p><ul><li>i 不区分大小写，/test/i</li><li>g 全局匹配，只是默认只匹配第一次出现的结果，/test/g</li><li>m 匹配多行，/test/m</li></ul><h3 id="术语与操作符"><a name="术语与操作符" class="anchor-navigation-ex-anchor" href="#术语与操作符"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. 术语与操作符</h3><ul><li>精确匹配，例如：/test/</li><li>匹配一类字符，例如：/[abcd]/，/<sup><a href="#fn_abc" id="reffn_abc">abc</a></sup>/，/[a-d]/</li><li>转义特殊字符如：<code>^、$、[</code>，另外见下面的预定义字符，例如：/[/，/\n/</li><li>匹配开始 <code>^</code> 与匹配结束 <code>$</code>，例如：/^test/，/test$/，/^test$/</li><li>重复出现：<ul><li>? 可选，出现一次或者不出现，例如：/t?est/</li><li><code>+</code> 出现一次或者多次，例如：/t+est/</li><li><code>*</code> 出现零次或者多次，例如：<code>/t*est/</code></li><li>贪婪和非贪婪，默认是贪婪的，可以用 ？改变，例如：/t+?est/</li><li>{n}，{n,m}，{n,}，{,m}，例如：/t{2,4}est/</li></ul></li><li>预定义字符<ul><li>\r 回车</li><li>\n 换行</li><li>\s 匹配空白字符，包括：空格、制表符、换页符，等</li><li>\d 匹配任意数字，等价：[0-9]</li><li>\D 匹配任意非数字，等价：<code>[^0-9]</code></li><li>\w 匹配包括下划线的任意单词字符，等价于 <code>[A-Za-z0-9_]</code></li><li>\W 匹配任何非单词字符，等价于 <code>[^A-Za-z0-9_]</code></li><li>. 匹配除了换行 \n 之外的任意字符</li><li>\b 空格，单词边界，可以是标点符号、空格、字符的开头或结尾；</li><li>\v 垂直制表符</li><li>\f 换页符</li><li>\t 水平制表符</li></ul></li><li>分组，例如：/(ab)+/</li><li>或操作符，例如：/(ab)+|(cd)+/</li><li>反向引用，\1，\2 一般和分组结合使用，例如：<code>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>(\w+)</span><span class="token punctuation">&gt;</span></span>(.+)&lt;\/\1&gt;/</code></li><li>正向先行断言，(?=) 括号里面的代表位置，不做匹配</li></ul><h3 id="编译正则表达式"><a name="编译正则表达式" class="anchor-navigation-ex-anchor" href="#编译正则表达式"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. 编译正则表达式</h3><p>正则表达式的两个重要阶段是：</p><ul><li>编译，正则表达式第一次被创建时</li><li>执行，编译过的正则表达式进行字符串匹配时</li></ul><p>正则表达式可以是编程时指定，也就是正则表达式字面量。 也可以在运行时指定，就是用字符串作为参数，调用 <code>new RegExp()</code> 创建正则表达式。注意，正则表达式字面量 \s 在字符串中应该表示为 &apos;\s&apos;，其中 <code>\\</code> 表示斜杠的转义。</p><h3 id="捕获匹配的片段"><a name="捕获匹配的片段" class="anchor-navigation-ex-anchor" href="#捕获匹配的片段"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. 捕获匹配的片段</h3><h4 id="执行简单的捕获"><a name="执行简单的捕获" class="anchor-navigation-ex-anchor" href="#执行简单的捕获"><i class="fa fa-link" aria-hidden="true"></i></a>执行简单的捕获</h4><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&apos;ac--bc&apos;</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[ab]c</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre><p>返回第一个匹配的结果</p><h4 id="用全局表达式进行匹配"><a name="用全局表达式进行匹配" class="anchor-navigation-ex-anchor" href="#用全局表达式进行匹配"><i class="fa fa-link" aria-hidden="true"></i></a>用全局表达式进行匹配</h4><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&apos;ac--bc&apos;</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[ab]c</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
</code></pre><p>返回所有匹配的结果</p><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">&apos;&lt;div class=&quot;test&quot;&gt;&lt;b&gt;hello&lt;/b&gt;&lt;i&gt;world!&lt;/i&gt;&lt;/div&gt;&apos;</span>
html<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(\/?)(\w+)([^&gt;]*?)&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
html<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(\/?)(\w+)([^&gt;]*?)&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
</code></pre><p>注意观察两个 match 的结果，这是两个不同的数组。match 的行为主要受到 /g 的影响。没有 /g 全局匹配的时候，match 只匹配第一个，如果没有匹配则返回 null。如果匹配成功，则返回一个数组，数组的第一个元素是整个匹配项，数组的其他匹配项，则是正则表达式的匹配子项。</p><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">&apos;&lt;div class=&quot;test&quot;&gt;&lt;b&gt;hello&lt;/b&gt;&lt;i&gt;world!&lt;/i&gt;&lt;/div&gt;&apos;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(\/?)(\w+)([^&gt;]*?)&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span>
</code></pre><p>反复调用 exec 方法，该方法保存了上一次调用的状态。</p><h4 id="捕获的引用"><a name="捕获的引用" class="anchor-navigation-ex-anchor" href="#捕获的引用"><i class="fa fa-link" aria-hidden="true"></i></a>捕获的引用</h4><pre class="language-"><code class="lang-javascript"><span class="token string">&apos;&lt;b class=&apos;</span>hello<span class="token string">&apos;&gt;hello&lt;/b&gt;&lt;i&gt;world!&lt;/i&gt;&apos;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(\w+)([^&gt;]*(.*?)&lt;\/1&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1234567890</span>&apos;<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d{3})(\d{3})(\d{4})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">$1-$2-$3</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>第一行代码使用 <code>\1</code> 来捕获匹配项 第二行代码使用 $1、$2、$3 表示每个捕获的数字</p><h4 id="没有捕获的分组"><a name="没有捕获的分组" class="anchor-navigation-ex-anchor" href="#没有捕获的分组"><i class="fa fa-link" aria-hidden="true"></i></a>没有捕获的分组</h4><pre class="language-"><code class="lang-javascript"><span class="token string">&quot;ninja-ninja-sword&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((ninja-)+)sword</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
<span class="token string">&quot;ninja-ninja-sword&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">((?:ninja-)+)sword</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre><p>在括号后加上 ?: 标记，这就是所谓的被动子表达式，该表达式只会为外层的括号创建捕获。</p><h3 id="利用函数进行替换"><a name="利用函数进行替换" class="anchor-navigation-ex-anchor" href="#利用函数进行替换"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. 利用函数进行替换</h3><pre class="language-"><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">upper</span><span class="token punctuation">(</span><span class="token parameter">letter</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> letter<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>
<span class="token string">&apos;border-bottom-width&apos;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-(\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> upper<span class="token punctuation">)</span>
</code></pre><pre class="language-"><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">compress</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> keys <span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([^=&amp;]+)=([^&amp;]*)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">full<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//console.log(&apos;full = %s, key = %s, value = %s&apos;, full, key, value);</span>
    <span class="token comment">//console.log(&apos;before: &apos;, keys);</span>
    keys<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>keys<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?</span> keys<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&apos;,&apos;</span> <span class="token operator">:</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token punctuation">;</span>
    <span class="token comment">//console.log(&apos;after: &apos;, keys);</span>
    <span class="token keyword">return</span> <span class="token string">&apos;&apos;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&apos;keys: &apos;</span><span class="token punctuation">,</span> keys<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> key <span class="token keyword">in</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&apos;=&apos;</span> <span class="token operator">+</span> keys<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;&amp;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&apos;foo=1&amp;foo=2&amp;blash=a&amp;blash=b&amp;foo=3&apos;</span><span class="token punctuation">;</span>
<span class="token comment">//console.log(&apos;str = %s&apos;, str);</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">compress</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>【补充】</p><ul><li>测验和练习，可以在 chrome 控制台中执行下面的代码：</li></ul><p>测试正则表达式的模式：</p><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">test</span><span class="token regex-delimiter">/</span></span>
reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&apos;testt&apos;</span><span class="token punctuation">)</span>
</code></pre><p>捕获字符串模式：</p><pre class="language-"><code class="lang-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&apos;ac--bc&apos;</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[ab]c</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[ab]c</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span>
</code></pre><h2 id="linux-中的正则表达式"><a name="linux-中的正则表达式" class="anchor-navigation-ex-anchor" href="#linux-中的正则表达式"><i class="fa fa-link" aria-hidden="true"></i></a>2. Linux 中的正则表达式</h2><p>正则表达式的语法基本相同。只不过 Linux Bash 中的正则表达式语法分为：基本的正则表达式和扩展的正则表达式，两个加起来就是 JavaScript 的正则表达式。</p><h3 id="grep-命令实现文本搜索"><a name="grep-命令实现文本搜索" class="anchor-navigation-ex-anchor" href="#grep-命令实现文本搜索"><i class="fa fa-link" aria-hidden="true"></i></a>2.1. grep 命令实现文本搜索</h3><p>grep 命令的格式如下：</p><p>grep [options] regex [file...]</p><p>options： -i 忽略大小写 -E 使用扩展的正则表达式语法</p><p>另外，对于命令行有特别用途的元字符，例如：<code>*</code>，如果出现在正则表达式中，需要用 <code>\</code> 转义。</p><p>例如： 在 <code>~/wd/nodejs-demo/</code> 目录下面找所有 <code>.js</code> 扩展名的文件，执行如下命令：</p><pre class="language-"><code class="lang-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;.js&quot;</span>                        // 会匹配 .json 文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;.js$&quot;</span>                       // 会匹配 node_module 目录下的 *.js 文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;^\.\/.*js$&quot;</span>                 // 会匹配 node_module 目录下的 *.js 文件
<span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;^\.\/[0-9]\{2\}.*js$&quot;</span>       // 正确匹配，匹配上的文字呈现红色
</code></pre><p>注意 PATTERN 被双引号引用起来以防止被 Shell 解析。</p><ul><li>Linux 基础命令介绍五：文本过滤 grep：<a href="https://segmentfault.com/a/1190000007416745" target="_blank">https://segmentfault.com/a/1190000007416745</a></li></ul><h3 id="less-命令中用正则表达式搜索"><a name="less-命令中用正则表达式搜索" class="anchor-navigation-ex-anchor" href="#less-命令中用正则表达式搜索"><i class="fa fa-link" aria-hidden="true"></i></a>2.2. less 命令中用正则表达式搜索</h3><p>/后面是正则表达式</p><h3 id="vim-中的正则表达式"><a name="vim-中的正则表达式" class="anchor-navigation-ex-anchor" href="#vim-中的正则表达式"><i class="fa fa-link" aria-hidden="true"></i></a>2.3. vim 中的正则表达式</h3><p>vim 支持基本的正则表达式，只是正则表达式的写法略微有些区别。我们看到表达式几乎一样；然而，在扩展表达式中，许多被认为是元字符的字符在基本的表达式中被看作是文本字符。只有用反斜杠把它们转义之后，它们才被看作是元字符。</p><p>/后面是正则表达式，实现文本搜索</p><p>:%s/正则表达式/新文本/g，实现全局正则表达式搜索替换。注意，最好在替换之前先搜索一下，相当于对正则表达式做一下测试，以免正则表达式错误导致文本的意外更改。 s 是 substitute 替换的意思，前面的 % 相当于 1,$ 代表替换范围是整个文档。其中正则表达式中斜杠如果太多 / 可以用其他符号替代，比如：?。</p><p>例如：<code>:s?^\(\s*\)\(.*\)\s*$? \1 + &apos;\2&apos;?</code> 这个替换的正则表达式用 ? 代替了 /，\1 和 \2 代表引用，引用相应的分组</p><h2 id="相关资源"><a name="相关资源" class="anchor-navigation-ex-anchor" href="#相关资源"><i class="fa fa-link" aria-hidden="true"></i></a>3. 相关资源</h2><ul><li>正则表达式在线开发和测试工具：<a href="https://regex101.com/" target="_blank">https://regex101.com/</a></li><li>正则表达式在线开发网站：<a href="http://www.regexplanet.com/advanced/javascript/index.html" target="_blank">http://www.regexplanet.com/advanced/javascript/index.html</a></li></ul><p></p><footer class="page-footer"><span class="page-footer-copyright">2017 - <span class="bsz-this-year"></span> by <a href="https://i.wangding.co" target="_blank">王顶</a>. All rights reserved.</span><span class="page-footer-footer-update"><span id="busuanzi_container_site_uv">本站访客人数 <span id="busuanzi_value_site_uv"></span> 人次</span></span></footer><script>document.getElementsByClassName("bsz-this-year")[0].innerHTML = new Date().getFullYear();</script><script async src="//cdn.jsdelivr.net/gh/sukkaw/busuanzi@2.3/bsz.pure.mini.js"></script><p></p><p></p><div id="gitalk-container"></div><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script>window.onload = function() {gitbook.events.on("page.change", function() {var gitalk = new Gitalk({"clientID":"5f2010891d3a1e43daad","clientSecret":"0f1589253938ab880568105760d6cdbd07da96a6","repo":"note","owner":"wangding","admin":["wangding"],"labels":["note"],"id":"/office/regexp.html"});gitalk.render("gitalk-container");});};var gitalk = new Gitalk({"clientID":"5f2010891d3a1e43daad","clientSecret":"0f1589253938ab880568105760d6cdbd07da96a6","repo":"note","owner":"wangding","admin":["wangding"],"labels":["note"],"id":"/office/regexp.html"});gitalk.render("gitalk-container");</script><p></p></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title"><span class="search-results-count"></span> results matching "<span class="search-query"></span>"</h1><ul class="search-results-list"></ul></div><div class="no-results"><h1 class="search-results-title">No results matching "<span class="search-query"></span>"</h1></div></div></div></div></div></div><a href="note-gitbook.html" class="navigation navigation-prev" aria-label="Previous page: GitBook"><i class="fa fa-angle-left"></i> </a><a href="tern_for_vim.html" class="navigation navigation-next" aria-label="Next page: tern_for_vim"><i class="fa fa-angle-right"></i></a></div><script>var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"RegExp","level":"2.5","depth":1,"next":{"title":"tern_for_vim","level":"2.6","depth":1,"path":"office/tern_for_vim.md","ref":"./office/tern_for_vim.md","articles":[]},"previous":{"title":"GitBook","level":"2.4","depth":1,"path":"office/note-gitbook.md","ref":"./office/note-gitbook.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","-highlight","-sharing","edit-link","forkmegithub-cn","search-plus","sharing-plus","anchor-navigation-ex","copy-code-button","prism","splitter","image-captions-extended","bsz","fancybox","image-wrapper","gtalk"],"styles":{"website":"styles/website.css"},"pluginsConfig":{"image-wrapper":{},"prism":{},"fancybox":{"helpers":{"buttons":{}}},"splitter":{},"image-captions-extended":{},"bsz":{"copyright":"2017&nbsp;-&nbsp;<span class=\"bsz-this-year\"></span>&nbsp;by&nbsp;<a href=\"https://i.wangding.co\">王顶</a>.&nbsp;All rights reserved."},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"fontsettings":{"theme":"white","family":"sans","size":2},"gtalk":{"clientID":"5f2010891d3a1e43daad","clientSecret":"0f1589253938ab880568105760d6cdbd07da96a6","repo":"note","owner":"wangding","admin":["wangding"],"labels":["note"]},"anchor-navigation-ex":{"associatedWithSummary":true,"float":{"floatIcon":"fa fa-navicon","level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":false,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showGoTop":true,"showLevel":true},"copy-code-button":{},"forkmegithub-cn":{"color":"red","url":"https://github.com/wangding/note"},"sharing":{"qq":true,"all":["weibo","douban","qzone","qq"],"douban":true,"facebook":false,"weibo":true,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":false,"messenger":false,"line":false,"vk":false,"pocket":false,"google":false,"viber":false,"stumbleupon":false,"qzone":true,"linkedin":false},"edit-link":{"label":"编辑本页","base":"https://github.com/wangding/note/blob/master/"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{},"image-captions":{"caption":"图：_CAPTION_","variable_name":"_pictures"}},"theme":"default","author":"王顶","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"_pictures":[{"backlink":"./office/git.html#fig2.3.1","level":"2.3","list_caption":"Figure: Git 基本概念","alt":"Git 基本概念","nro":1,"url":"http://www.ruanyifeng.com/blogimg/asset/2015/bg2015120901.png","index":1,"caption_template":"图：_CAPTION_","label":"Git 基本概念","attributes":{},"skip":false,"key":"2.3.1"},{"backlink":"./office/git.html#fig2.3.2","level":"2.3","list_caption":"Figure: issue filter.png","alt":"issue filter.png","nro":2,"url":"http://upload-images.jianshu.io/upload_images/3058932-fbc953aaadb6cdf0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240","index":2,"caption_template":"图：_CAPTION_","label":"issue filter.png","attributes":{},"skip":false,"key":"2.3.2"}]},"title":"学习笔记","language":"zh-hans","gitbook":"*","description":"学习笔记及各种参考资料链接"},"file":{"path":"office/regexp.md","mtime":"2022-11-05T02:43:51.019Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2022-11-05T02:45:16.363Z"},"basePath":"..","book":{"language":""}});
        });</script></div><script src="../gitbook/gitbook.js"></script><script src="../gitbook/theme.js"></script><script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script><script src="../gitbook/gitbook-plugin-forkmegithub-cn/plugin.js"></script><script src="../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script><script src="../gitbook/gitbook-plugin-search-plus/search.js"></script><script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script><script src="../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script><script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script><script src="../gitbook/gitbook-plugin-fancybox/jquery.min.js"></script><script src="../gitbook/gitbook-plugin-fancybox/jquery.mousewheel.pack.js"></script><script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox.pack.js"></script><script src="../gitbook/gitbook-plugin-fancybox/jquery.fancybox-buttons.js"></script><script src="../gitbook/gitbook-plugin-fancybox/plugin.js"></script><script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script></body></html>